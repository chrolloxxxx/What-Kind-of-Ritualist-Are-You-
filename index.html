<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>What Kind of Ritualist Are You?</title>
  <style>
    body {
      font-family: 'Georgia', serif;
      background: linear-gradient(135deg, #052616 0%, #010d06 100%);
      color: #a6ffbf;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      max-width: 650px;
      width: 100%;
      text-align: center;
    }

    h1 {
      font-size: 2.6rem;
      margin-bottom: 0.8rem;
      color: #b8ffd2;
      text-shadow: 0 0 25px rgba(113, 255, 176, 0.6);
    }

    .subtitle {
      font-size: 1rem;
      color: #98e8b2;
      margin-bottom: 2rem;
      opacity: 0.9;
    }

    .form-box {
      background: rgba(3, 20, 11, 0.9);
      border-radius: 20px;
      border: 1px solid rgba(165, 255, 205, 0.3);
      padding: 2.5rem;
      box-shadow: 0 0 35px rgba(113, 255, 176, 0.3);
      backdrop-filter: blur(12px);
    }

    .input-group {
      margin-bottom: 1.5rem;
      text-align: left;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: #98e8b2;
    }

    input {
      width: 100%;
      padding: 0.9rem;
      border-radius: 10px;
      background: rgba(0, 20, 10, 0.9);
      border: 1px solid rgba(113, 255, 176, 0.3);
      color: #a6ffbf;
      font-size: 1rem;
      outline: none;
      transition: all 0.2s ease;
    }

    input:focus {
      border-color: #a6ffbf;
      box-shadow: 0 0 10px rgba(113, 255, 176, 0.4);
    }

    input[type="file"] {
      color: #a6ffbf;
      border: 1px dashed rgba(113, 255, 176, 0.3);
      background: rgba(3, 15, 8, 0.7);
      cursor: pointer;
    }

    button {
      width: 100%;
      margin-top: 0.5rem;
      background: linear-gradient(135deg, #35ff9e, #17cc70);
      color: #021308;
      font-size: 1rem;
      font-weight: bold;
      border: none;
      border-radius: 999px;
      padding: 1rem;
      cursor: pointer;
      transition: all 0.25s ease;
    }

    button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      background: linear-gradient(135deg, #244d35, #0a2a19);
    }

    button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 0 20px rgba(113, 255, 176, 0.6);
    }

    .result {
      display: none;
      margin-top: 2rem;
      animation: fadeIn 0.4s ease;
    }

    .result.show {
      display: block;
    }

    .result-card {
      background: radial-gradient(circle at top, rgba(116, 255, 188, 0.25), transparent 70%), linear-gradient(180deg, #062c19 0%, #020804 100%);
      border: 1px solid rgba(153, 255, 206, 0.9);
      border-radius: 20px;
      padding: 2rem 1.5rem 1rem;
      box-shadow: 0 0 30px rgba(113, 255, 176, 0.4);
      text-align: center;
      max-width: 350px;
      margin: auto;
    }

    .archetype-title {
      font-size: 1.3rem;
      color: #b8ffd2;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 0.8rem;
    }

    .archetype-description {
      font-size: 0.9rem;
      color: #e6fff1;
      line-height: 1.5;
      margin-bottom: 1.2rem;
    }

    .cat-img {
      width: 100%;
      max-width: 240px;
      display: block;
      margin: 1rem auto;
      border-radius: 12px;
      box-shadow: 0 0 45px rgba(113, 255, 176, 0.7),
                  0 0 60px rgba(113, 255, 176, 0.5);
      object-fit: contain;
    }

    .tagline {
      font-style: italic;
      font-size: 0.9rem;
      color: #b8ffd2;
      margin-top: 1rem;
    }

    .usernames {
      margin-top: 1rem;
      font-size: 0.8rem;
      color: #98e8b2;
    }

    .action-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .action-btn {
      flex: 1;
      padding: 0.8rem;
      border-radius: 999px;
      border: 1px solid rgba(140, 255, 203, 0.65);
      background: rgba(4, 28, 16, 1);
      color: #a6ffbf;
      font-size: 0.9rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .action-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 0 18px rgba(113, 255, 176, 0.6);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>What Kind of Ritualist Are You?</h1>
    <p class="subtitle">Plug in your X and Discord sigils and let the network divine your Ritualist archetype.</p>

    <div class="form-box">
      <div class="input-group">
        <label>X (Twitter) Username</label>
        <input type="text" id="xUsername" placeholder="@ritualist">
      </div>

      <div class="input-group">
        <label>Discord Username</label>
        <input type="text" id="discordUsername" placeholder="ritualist#0000">
      </div>

      <div class="input-group">
        <label>Upload</label>
        <input type="file" id="photoInput" accept="image/*" required>
      </div>

      <button id="summonBtn" onclick="summonArchetype()" disabled>Summon My Archetype</button>

      <div class="result" id="result">
        <div class="result-card">
          <div class="archetype-title" id="archetypeName"></div>
          <div class="archetype-description" id="essence"></div>
          <img id="catImage" class="cat-img" style="display:none;" alt="Uploaded cat">
          <div class="tagline" id="tagline"></div>
          <div class="usernames" id="usernames"></div>
        </div>

        <div class="action-buttons">
          <button class="action-btn" onclick="downloadImage()">üì• Download</button>
          <button class="action-btn" onclick="shareToTwitter()">üê¶ Share to X</button>
        </div>
      </div>
    </div>
  </div>

  <canvas id="canvas" style="display:none;"></canvas>

  <script>
    const archetypes = [
      { name: "THE ORACLES", essence: "Strategic thinkers, visionaries, narrative builders.", tagline: "They see patterns before the blocks are even minted." },
      { name: "THE SUMMONERS", essence: "Community activators, hosts, event organizers, raiders.", tagline: "They call the crowd, and the crowd always answers." },
      { name: "THE ALCHEMISTS", essence: "Experimenters and degen builders mixing liquidity, bots, and code.", tagline: "Turning smart contracts into spellcraft." },
      { name: "THE ARCHITECTS", essence: "Infrastructure devs and backend mages who build Ritual's spine.", tagline: "They write the code that powers the coven." },
      { name: "THE CHRONICLERS", essence: "Storytellers, threadwriters, meme-smiths, content magi.", tagline: "They document the rituals so others may follow." },
      { name: "THE GUARDIANS", essence: "Moderators, security analysts, whitehats, ops watchers.", tagline: "The firewall between chaos and order." },
      { name: "THE CHAOS MAGES", essence: "Meme lords, shitposters, and energy catalysts.", tagline: "Where entropy becomes engagement." },
      { name: "THE WHISPERERS", essence: "Quiet operators, data analysts, researchers, and stealth alpha leakers.", tagline: "They don't talk much, but the market listens when they do." },
      { name: "THE SHRINES", essence: "Artists, plushie makers, and aesthetic designers.", tagline: "Every brushstroke a blessing." },
      { name: "THE SYNTHWRIGHTS", essence: "AI-powered creators, automation sorcerers, Ritual + Infernet tinkerers.", tagline: "They merge circuits and sigils into sentient art." }
    ];

    let currentArchetype = null;
    let uploadedPhoto = null;

    const photoInput = document.getElementById("photoInput");
    const catImage = document.getElementById("catImage");
    const summonBtn = document.getElementById("summonBtn");

    // Enable button only if photo is uploaded
    photoInput.addEventListener("change", function (event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          uploadedPhoto = e.target.result;
          catImage.src = uploadedPhoto;
          catImage.style.display = "block";
          summonBtn.disabled = false;
        };
        reader.readAsDataURL(file);
      } else {
        summonBtn.disabled = true;
      }
    });

    function summonArchetype() {
      const xUsername = document.getElementById('xUsername').value.trim();
      const discordUsername = document.getElementById('discordUsername').value.trim();

      if (!uploadedPhoto) {
        alert("Please upload an image before summoning!");
        return;
      }

      const combined = xUsername + discordUsername;
      let hash = 0;
      for (let i = 0; i < combined.length; i++) {
        hash = ((hash << 5) - hash) + combined.charCodeAt(i);
        hash &= hash;
      }
      const index = Math.abs(hash) % archetypes.length;
      currentArchetype = archetypes[index];

      document.getElementById('archetypeName').textContent = currentArchetype.name;
      document.getElementById('essence').textContent = currentArchetype.essence;
      document.getElementById('tagline').textContent = currentArchetype.tagline;
      document.getElementById('usernames').innerHTML =
        (xUsername ? `<div>X: ${xUsername}</div>` : '') +
        (discordUsername ? `<div>Discord: ${discordUsername}</div>` : '');
      document.getElementById('result').classList.add('show');
    }

    function downloadImage() {
      if (!currentArchetype) { alert("Summon your archetype first!"); return; }
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = 600; canvas.height = 800;

      const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
      gradient.addColorStop(0, '#062c19'); gradient.addColorStop(1, '#020804');
      ctx.fillStyle = gradient; ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = '#b8ffd2';
      ctx.font = 'bold 36px Georgia';
      ctx.textAlign = 'center';
      ctx.fillText(currentArchetype.name, 300, 80);
      ctx.font = '20px Georgia';
      ctx.fillStyle = '#e6fff1';
      wrapText(ctx, currentArchetype.essence, 300, 130, 500, 28);

      if (uploadedPhoto) {
        const img = new Image();
        img.src = uploadedPhoto;
        img.onload = () => {
          const size = 300;
          ctx.save();
          // glow effect behind image
          const glow = ctx.createRadialGradient(300, 400, 40, 300, 400, 150);
          glow.addColorStop(0, "rgba(113,255,176,0.5)");
          glow.addColorStop(1, "rgba(0,0,0,0)");
          ctx.fillStyle = glow;
          ctx.beginPath();
          ctx.arc(300, 400, 150, 0, Math.PI * 2);
          ctx.fill();
          ctx.restore();

          ctx.drawImage(img, 150, 250, size, size);
          finishCard(ctx);
        };
      } else finishCard(ctx);

      function finishCard(ctx) {
        ctx.fillStyle = '#b8ffd2';
        ctx.font = 'italic 22px Georgia';
        wrapText(ctx, currentArchetype.tagline, 300, 600, 500, 28);
        const link = document.createElement('a');
        link.download = 'ritualist-card.png';
        link.href = canvas.toDataURL();
        link.click();
      }
    }

    function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
      const words = text.split(' ');
      let line = '', lines = [];
      for (let n = 0; n < words.length; n++) {
        const testLine = line + words[n] + ' ';
        const metrics = ctx.measureText(testLine);
        if (metrics.width > maxWidth && n > 0) {
          lines.push(line);
          line = words[n] + ' ';
        } else line = testLine;
      }
      lines.push(line);
      lines.forEach((l, i) => ctx.fillText(l.trim(), x, y + i * lineHeight));
    }

    function shareToTwitter() {
      if (!currentArchetype) { alert("Summon first!"); return; }
      const text = `I'm ${currentArchetype.name}! ${currentArchetype.tagline}`;
      const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
      window.open(url, '_blank');
    }
  </script>
</body>
</html>
